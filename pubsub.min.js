var PubSub={};(function(c){var b={};var a=-1;c.publish=function(f,g,e){if(!b.hasOwnProperty(f)){return false}var d=function(){var n=b[f];var h=function(i){return function(){throw i}};for(var l=0,k=n.length;l<k;l++){try{n[l].func(f,g)}catch(m){setTimeout(h(m),0)}}};if(e===true){d()}else{setTimeout(d,0)}return true};c.subscribe=function(f,e){if(!b.hasOwnProperty(f)){b[f]=[]}var d=(++a).toString();b[f].push({token:d,func:e});return d};c.unsubscribe=function(g){for(var d in b){if(b.hasOwnProperty(d)){for(var f=0,e=b[d].length;f<e;f++){if(b[d][f].token===g){b[d].splice(f,1);return g}}}}return false}}(PubSub));